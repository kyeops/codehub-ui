<template>
  <require from="../utility/sort"></require>
  <require from="../utility/pick"></require>
  <require from="../search/search-project"></require>
  <div class="container-fluid bg_main">
    <div class="row">
      <search-project></search-project>
      <div class="col-lg-12">
        <div class="page-header">
          <h1>${projectTitle}</h1>
        </div>
      </div>
    </div>

    <div class="row">
      <label for="sortProperty">Sort By:</label>
      <select id="sortProperty" ref="sortProperty" class="form-control">
        <option value="stars">Stars</option>
        <option value="watchers">Watchers</option>
        <option value="releases">Releases</option>
        <option value="commits">Commits</option>
        <option value="contributors">Contributors</option>
      </select>
      <select ref="sortDirection" class="form-control">
        <option value="descending">Descending</option>
        <option value="ascending">Ascending</option>
      </select>
    </div>

    <div class="row">
      <div repeat.for="repo of projects | sort: { propertyName: sortProperty.value, direction: sortDirection.value} | pick:20" class="clearfix col-lg-6">
        <div class="card">
          <div class="card-header">
            <h2 class="repo-name"><a route-href="route:project-details-popular">${repo.project_name}</a></h2>
            <h5 class="repo-language">

              <span if.bind="repo.language === 'JavaScript'"><img class="project-icon" alt="JavaScript Icon" title="JavaScript Icon" src="../../img/logos/javascript.svg"></span>
              <span if.bind="repo.language === 'Ruby'"><img class="project-icon" alt="Ruby Icon" title="Ruby Icon" src="../../img/logos/ruby.svg"></span>
              <span if.bind="repo.language === 'Java'"><img class="project-icon java-icon" alt="Java Icon" title="Java Icon" src="../../img/logos/java.svg"></span>
              <span if.bind="repo.language === 'HTML'"><img class="project-icon" alt="HTML Icon" title="HTML Icon" src="../../img/logos/html5.svg"></span>
              <span if.bind="repo.language === 'Coffeescript'"><img class="project-icon coffee-icon" alt="Coffeescript Icon" title="Coffeescript Icon" src="../../img/logos/coffeescript.svg"></span>
              <span if.bind="repo.language === 'Python'"><img class="project-icon" alt="Python Icon" title="Python Icon" src="../../img/logos/python.svg"></span>
              <span if.bind="repo.language === 'Groovy'"><img class="project-icon groovy-icon" alt="Groovy Icon" title="Groovy Icon" src="../../img/logos/Groovy-logo.svg"></span>
              <span if.bind="repo.language === 'Shell'"><img class="project-icon" alt="Shell Icon" title="Shell Icon" src="../../img/logos/terminal.svg"></span>
              <span if.bind="repo.language === 'Scala'"><img class="project-icon" alt="Scala Icon" title="Scala Icon" src="../../img/logos/scala.svg"></span>
              <span if.bind="repo.language === 'null'"></span>
            </h5>

          </div>

          <div class="card-subheader">
            <h4 class="card-subtitle text-muted">${repo.organization}</h4>
          </div>

          <div class="card-block">

            <div class="repo-descrip">${repo.project_description}</div>

            <ul class="repo-stats">
              <li class="flex-item">
                <span class="octicon octicon-star"></span> Stars <span class="badge">${repo.stars}</span>
              </li>
              <li class="flex-item">
                <span class="octicon octicon-organization"></span> Contributors <span class="badge">${repo.contributors}</span>
              </li>
              <li class="flex-item">
                <span class="octicon octicon-eye"></span> Watchers <span class="badge">${repo.watchers}</span>
              </li>
              <li class="flex-item">
                <span class="octicon octicon-git-commit"></span> Commits <span class="badge">${repo.commits}</span>
              </li>
              <li class="flex-item">
                <span class="octicon octicon-tag"></span> Releases <span class="badge">${repo.releases}</span>
              </li>
            </ul>
          </div>

          <div class="card-footer">
            <ul class="flex-footer">
              <li class="flex-item ">
                <a href="${repo.readme_url}" target="_blank" class="card-link"><span class="octicon octicon-book"></span> Readme</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>
